<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CycleTracker - Bike Riding App</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" id="app-manifest">
    <meta name="theme-color" content="#3b82f6">
    <style>
        /* Custom styles for neumorphism and other effects */
        .neumorph {
            border-radius: 16px;
            background: #f0f0f0;
            box-shadow: 8px 8px 16px #d9d9d9, -8px -8px 16px #ffffff;
        }
        
        .neumorph-inset {
            border-radius: 16px;
            background: #f0f0f0;
            box-shadow: inset 8px 8px 16px #d9d9d9, inset -8px -8px 16px #ffffff;
        }
        
        .neumorph-dark {
            border-radius: 16px;
            background: #1f2937;
            box-shadow: 8px 8px 16px #1a202c, -8px -8px 16px #242e3d;
        }
        
        .neumorph-inset-dark {
            border-radius: 16px;
            background: #1f2937;
            box-shadow: inset 8px 8px 16px #1a202c, inset -8px -8px 16px #242e3d;
        }
        
        .tab-active {
            color: #3b82f6;
        }
        
        .dark .tab-active {
            color: #60a5fa;
        }
        
        /* Animation for the pulse effect */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
         /* Map styling */
        #map {
            height: 250px;
            width: 100%;
            border-radius: 16px;
        }
      
        /* Hide map when no GPS */
        .no-gps #map {
            display: none;
        }
        
        /* Manual input styling */
        .manual-input {
            display: none;
        }
        
        .no-gps .manual-input {
            display: block;
        }
        
        /* Install button styling */
        #installButton {
            display: none;
        }
        
        /* Service worker ready */
        .sw-ready #installButton {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div class="max-w-md mx-auto min-h-screen flex flex-col bg-white dark:bg-gray-800">
        <!-- Header -->
        <header class="p-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-600 dark:text-blue-400">CycleTracker</h1>
            <div class="flex items-center space-x-2">
                <button id="installButton" class="p-2 rounded-full neumorph dark:neumorph-dark text-green-600 dark:text-green-400">
                    <i class="fas fa-download"></i>
                </button>
                <button id="themeToggle" class="p-2 rounded-full neumorph dark:neumorph-dark">
                    <i class="fas fa-moon text-gray-700 dark:text-yellow-300"></i>
                </button>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto px-4 pb-20">
            <!-- Ride Tab Content -->
            <div id="rideTab" class="tab-content">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="neumorph-inset dark:neumorph-inset-dark p-4 text-center">
                        <p class="text-gray-500 dark:text-gray-400">Distance</p>
                        <p id="distance" class="text-2xl font-bold">0.0 km</p>
                    </div>
                    <div class="neumorph-inset dark:neumorph-inset-dark p-4 text-center">
                        <p class="text-gray-500 dark:text-gray-400">Duration</p>
                        <p id="duration" class="text-2xl font-bold">00:00:00</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="neumorph-inset dark:neumorph-inset-dark p-4 text-center">
                        <p class="text-gray-500 dark:text-gray-400">Avg Speed</p>
                        <p id="avgSpeed" class="text-2xl font-bold">0.0 km/h</p>
                    </div>
                    <div class="neumorph-inset dark:neumorph-inset-dark p-4 text-center">
                        <p class="text-gray-500 dark:text-gray-400">Calories</p>
                        <p id="calories" class="text-2xl font-bold">0</p>
                    </div>
                </div>
                
                <!-- Map Container -->
                <div id="map" class="mb-4">
                    <!-- Map will be rendered here -->
                    <div class="h-full w-full flex items-center justify-center bg-gray-200 dark:bg-gray-700 rounded-lg">
                        <p class="text-gray-500">Loading map...</p>
                    </div>
                </div>
                
                <!-- Manual Input (shown when no GPS) -->
                <div class="manual-input mb-4">
                    <div class="neumorph-inset dark:neumorph-inset-dark p-4">
                        <h3 class="font-bold mb-2 text-gray-700 dark:text-gray-300">Manual Ride Logging</h3>
                        <div class="mb-2">
                            <label class="block text-sm text-gray-600 dark:text-gray-400">Duration (minutes)</label>
                            <input type="number" id="manualDuration" class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white" value="30">
                        </div>
                        <div class="mb-2">
                            <label class="block text-sm text-gray-600 dark:text-gray-400">Distance (km)</label>
                            <input type="number" id="manualDistance" class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white" value="5.0" step="0.1">
                        </div>
                    </div>
                </div>
                
                <!-- Control Buttons -->
                <div class="flex justify-center space-x-4 mt-6">
                    <button id="startBtn" class="neumorph dark:neumorph-dark px-6 py-3 rounded-full text-green-600 dark:text-green-400 pulse-animation">
                        <i class="fas fa-play-circle text-2xl"></i>
                        <span class="ml-2">Start</span>
                    </button>
                    <button id="pauseBtn" disabled class="neumorph dark:neumorph-dark px-6 py-3 rounded-full text-yellow-600 dark:text-yellow-400 opacity-50">
                        <i class="fas fa-pause-circle text-2xl"></i>
                        <span class="ml-2">Pause</span>
                    </button>
                    <button id="stopBtn" disabled class="neumorph dark:neumorph-dark px-6 py-3 rounded-full text-red-600 dark:text-red-400 opacity-50">
                        <i class="fas fa-stop-circle text-2xl"></i>
                        <span class="ml-2">Stop</span>
                    </button>
                </div>
                
                <!-- GPS Status -->
                <div id="gpsStatus" class="mt-4 p-2 text-center text-sm neumorph-inset dark:neumorph-inset-dark">
                    <i class="fas fa-satellite text-blue-500"></i>
                    <span class="ml-2">Searching for GPS signal...</span>
                </div>
            </div>
            
            <!-- History Tab Content -->
            <div id="historyTab" class="tab-content hidden">
                <h2 class="text-xl font-bold mb-4 text-gray-700 dark:text-gray-300">Ride History</h2>
                <div id="ridesList" class="space-y-4">
                    <!-- Ride history items will be added here -->
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-bicycle text-4xl mb-2"></i>
                        <p>No rides recorded yet</p>
                    </div>
                </div>
            </div>
            
            <!-- Leaderboard Tab Content -->
            <div id="leaderboardTab" class="tab-content hidden">
                <h2 class="text-xl font-bold mb-4 text-gray-700 dark:text-gray-300">Weekly Leaderboard</h2>
                <div class="neumorph-inset dark:neumorph-inset-dark p-4 mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-medium">Your Weekly Distance:</span>
                        <span id="weeklyDistance" class="font-bold">0.0 km</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4">
                        <div id="progressBar" class="bg-blue-600 h-4 rounded-full" style="width: 0%"></div>
                    </div>
                    <p class="text-xs mt-2 text-gray-500 dark:text-gray-400">Goal: 50 km</p>
                </div>
                
                <div id="leaderboardList" class="space-y-2">
                    <!-- Leaderboard items will be added here -->
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-trophy text-4xl mb-2"></i>
                        <p>No leaderboard data yet</p>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab Content -->
            <div id="settingsTab" class="tab-content hidden">
                <h2 class="text-xl font-bold mb-4 text-gray-700 dark:text-gray-300">Settings</h2>
                
                <div class="neumorph-inset dark:neumorph-inset-dark p-4 mb-4">
                    <h3 class="font-medium mb-2">App Settings</h3>
                    
                    <div class="flex justify-between items-center mb-4">
                        <span>Dark Mode</span>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="darkModeToggle" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                        </label>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-1">Weight (kg)</label>
                        <input type="number" id="weightInput" class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white" value="70">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block mb-1">Distance Unit</label>
                        <select id="unitSelect" class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white">
                            <option value="km">Kilometers (km)</option>
                            <option value="mi">Miles (mi)</option>
                        </select>
                    </div>
                </div>
                
                <div class="neumorph-inset dark:neumorph-inset-dark p-4 mb-4">
                    <h3 class="font-medium mb-2">Data Management</h3>
                    
                    <button id="exportBtn" class="w-full mb-2 py-2 px-4 bg-blue-500 text-white rounded hover:bg-blue-600 transition">
                        <i class="fas fa-download mr-2"></i> Export Ride Data
                    </button>
                    
                    <button id="clearBtn" class="w-full py-2 px-4 bg-red-500 text-white rounded hover:bg-red-600 transition">
                        <i class="fas fa-trash mr-2"></i> Clear All Data
                    </button>
                </div>
                
                <div class="text-center text-sm text-gray-500 dark:text-gray-400 mt-8">
                    <p>CycleTracker v1.0.0</p>
                    <p>PWA Cycling App</p>
                </div>
            </div>
        </main>
        
        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
            <div class="max-w-md mx-auto flex justify-around">
                <button class="tab-btn tab-active py-3 px-6 text-center" data-tab="rideTab">
                    <i class="fas fa-bicycle block text-xl"></i>
                    <span class="text-xs mt-1">Ride</span>
                </button>
                <button class="tab-btn py-3 px-6 text-center" data-tab="historyTab">
                    <i class="fas fa-history block text-xl"></i>
                    <span class="text-xs mt-1">History</span>
                </button>
                <button class="tab-btn py-3 px-6 text-center" data-tab="leaderboardTab">
                    <i class="fas fa-trophy block text-xl"></i>
                    <span class="text-xs mt-1">Leaderboard</span>
                </button>
                <button class="tab-btn py-3 px-6 text-center" data-tab="settingsTab">
                    <i class="fas fa-cog block text-xl"></i>
                    <span class="text-xs mt-1">Settings</span>
                </button>
            </div>
        </nav>
    </div>

    <script src="app.js"></script>
</body>
</html>